<!DOCTYPE html>
<html lang="ms">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Bonus Display</title>

<style>
html, body {
  margin: 0;
  padding: 0;
  background: #0b0b0b;
  font-family: Arial, sans-serif;
  color: #f5d77a;
  overflow: hidden;
}

/* ===== 展示窗口 ===== */
.flow-wrapper {
  width: 100%;
  overflow: hidden;
  padding: 40px 0;
  touch-action: none;
}

/* ===== 滚动轨道 ===== */
.flow-track {
  display: flex;
  width: max-content;
  animation: scrollRight 70s linear infinite;
  animation-play-state: running;
  will-change: transform;
}

.flow-track.paused {
  animation-play-state: paused;
}

/* ===== Bonus 卡 ===== */
.bonus-card {
  width: 440px;
  height: 680px;
  margin: 0 14px;
  background: radial-gradient(circle at top, #1a1a1a, #0f0f0f);
  border: 2px solid #d4af37;
  border-radius: 999px;
  padding: 26px 18px;
  box-sizing: border-box;

  display: flex;
  flex-direction: column;
  justify-content: center;
  text-align: center;

  box-shadow:
    inset 0 0 18px rgba(212,175,55,0.35),
    0 0 25px rgba(212,175,55,0.25);

  transition:
    transform 0.35s ease,
    box-shadow 0.35s ease,
    filter 0.35s ease,
    opacity 0.35s ease;
}

/* 高亮（选中 / 中间） */
.bonus-card.active {
  transform: scale(1.15);
  z-index: 10;
  filter: brightness(1.15);
  box-shadow:
    inset 0 0 24px rgba(212,175,55,0.55),
    0 0 40px rgba(212,175,55,0.7);
}

/* 变暗（未选中） */
.bonus-card.dim {
  opacity: 0.35;
  filter: grayscale(30%);
}

/* 文本 */
.bonus-card h2 {
  margin: 0 0 14px;
  font-size: 18px;
}
.tc {
  font-size: 13px;
  line-height: 1.7;
  color: #eee;
}

/* 自动滚动动画 */
@keyframes scrollRight {
  from { transform: translateX(0); }
  to   { transform: translateX(-50%); }
}
</style>
</head>

<body>

<div class="flow-wrapper" id="wrapper">
  <div class="flow-track" id="track">

    <!-- 三组，防空白 -->
    <div class="bonus-card"><h2>Bonus 1</h2><div class="tc">• Sah ahli baru</div></div>
    <div class="bonus-card"><h2>Bonus 2</h2><div class="tc">• Isi T&C</div></div>
    <div class="bonus-card"><h2>Bonus 3</h2><div class="tc">• Isi T&C</div></div>

    <div class="bonus-card"><h2>Bonus 1</h2><div class="tc">• Sah ahli baru</div></div>
    <div class="bonus-card"><h2>Bonus 2</h2><div class="tc">• Isi T&C</div></div>
    <div class="bonus-card"><h2>Bonus 3</h2><div class="tc">• Isi T&C</div></div>

    <div class="bonus-card"><h2>Bonus 1</h2><div class="tc">• Sah ahli baru</div></div>
    <div class="bonus-card"><h2>Bonus 2</h2><div class="tc">• Isi T&C</div></div>
    <div class="bonus-card"><h2>Bonus 3</h2><div class="tc">• Isi T&C</div></div>

  </div>
</div>

<script>
const wrapper = document.getElementById('wrapper');
const track = document.getElementById('track');
const cards = document.querySelectorAll('.bonus-card');

let startX = 0;
let currentX = 0;
let dragging = false;
let moved = false;
let resumeTimer = null;

/* ===== 触摸 / 鼠标开始 ===== */
function start(e) {
  dragging = true;
  moved = false;
  startX = e.touches ? e.touches[0].clientX : e.clientX;
  track.classList.add('paused');
}

/* ===== 移动 ===== */
function move(e) {
  if (!dragging) return;
  const x = e.touches ? e.touches[0].clientX : e.clientX;
  const dx = x - startX;

  if (Math.abs(dx) > 10) moved = true;

  track.style.animation = 'none';
  track.style.transform = `translateX(${currentX + dx}px)`;
  e.preventDefault();
}

/* ===== 结束 ===== */
function end(e) {
  if (!dragging) return;
  dragging = false;

  const endX = e.changedTouches ? e.changedTouches[0].clientX : e.clientX;
  const dx = endX - startX;

  if (!moved) {
    const target = e.target.closest('.bonus-card');
    if (target) selectCard(target);
  } else {
    currentX += dx;
  }

  resetResume();
}

/* ===== 选中并居中 ===== */
function selectCard(card) {
  cards.forEach(c => {
    c.classList.remove('active');
    c.classList.add('dim');
  });

  card.classList.add('active');
  card.classList.remove('dim');
  track.classList.add('paused');

  // ===== 自动居中计算 =====
  const wrapperRect = wrapper.getBoundingClientRect();
  const cardRect = card.getBoundingClientRect();

  const wrapperCenter = wrapperRect.left + wrapperRect.width / 2;
  const cardCenter = cardRect.left + cardRect.width / 2;
  const moveX = cardCenter - wrapperCenter;

  track.style.transition = 'transform 0.6s ease';
  track.style.transform = `translateX(${currentX - moveX}px)`;
  currentX = currentX - moveX;
}

/* ===== 恢复 ===== */
function resetResume() {
  if (resumeTimer) clearTimeout(resumeTimer);
  resumeTimer = setTimeout(clearAll, 5000);
}

function clearAll() {
  cards.forEach(c => c.classList.remove('active', 'dim'));
  track.style.transition = '';
  track.style.animation = '';
  track.style.transform = '';
  currentX = 0;
}

/* 点击空白处取消 */
wrapper.addEventListener('click', e => {
  if (!e.target.closest('.bonus-card')) {
    clearAll();
  }
});

/* 事件绑定 */
wrapper.addEventListener('touchstart', start, { passive: false });
wrapper.addEventListener('touchmove', move, { passive: false });
wrapper.addEventListener('touchend', end);

wrapper.addEventListener('mousedown', start);
wrapper.addEventListener('mousemove', move);
wrapper.addEventListener('mouseup', end);
</script>

</body>
</html>

